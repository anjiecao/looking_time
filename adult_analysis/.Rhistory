here()
library(here)
RAW_DATA_DIRECTORY <- here("data/raw_data/")
MIN_ROW <- 400  #subject to change
MERGED_DATA_PATH <- here("data/merged_data/merged_data.csv")
raw_files <- str_c(RAW_DATA_DIRECTORY, dir(here(RAW_DATA_DIRECTORY), "*.csv"))
RAW <- map_df(raw_files, function(file) {
d <- read_csv(file) %>%
count() %>%
mutate(
file_name = file
)
})
library(here)
library(tidyverse)
# currently not deidentifiying!!
RAW_DATA_DIRECTORY <- here("data/raw_data/")
MIN_ROW <- 400  #subject to change
MERGED_DATA_PATH <- here("data/merged_data/merged_data.csv")
raw_files <- str_c(RAW_DATA_DIRECTORY, dir(here(RAW_DATA_DIRECTORY), "*.csv"))
RAW <- map_df(raw_files, function(file) {
d <- read_csv(file) %>%
count() %>%
mutate(
file_name = file
)
})
View(RAW)
RAW <- map_df(raw_files, function(file) {
d <- read_csv(file) %>%
count() %>%
mutate(
file_name = file
)
})
View(RAW)
source('~/Desktop/projects/looking_time/adult_analysis/00_merged_and_deidentified.R', echo=TRUE)
View(RAW_DATA)
source('~/Desktop/projects/looking_time/adult_analysis/00_merged_and_deidentified.R', echo=TRUE)
source('~/Desktop/projects/looking_time/adult_analysis/00_merged_and_deidentified.R', echo=TRUE)
knitr::opts_chunk$set(echo = TRUE)
d_path <- here("data/merged_data/merged_data.csv")
df.raw <- read_csv(d_path)
View(df.raw)
df.raw %>%
filter(trial_type %in% TEST_TRIAL)
TEST_TRIAL <- c("pref_reveal", "trial")
df.raw %>%
filter(trial_type %in% TEST_TRIAL)
TEST_TRIAL <- c("pref_reveal", "trial")
df.raw %>%
filter(stimulus_type %in% TEST_TRIAL)
TEST_TRIAL <- c("pref_reveal", "trial")
df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, stimulus_type, rt, key_press, trial_looking_time,
block_number, stimulus_displayed)
source('~/Desktop/projects/looking_time/adult_analysis/00_merged_and_deidentified.R', echo=TRUE)
library(tidyverse)
library(here)
d_path <- here("data/merged_data/merged_data.csv")
df.raw <- read_csv(d_path)
TEST_TRIAL <- c("pref_reveal", "trial")
# do we want to go w/ the data wrangling route or the jspsych route?
df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, stimulus_type, rt, key_press, trial_looking_time,
block_number, stimulus_displayed)
TEST_TRIAL <- c("pref_reveal", "trial")
# do we want to go w/ the data wrangling route or the jspsych route?
df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, stimulus_type, rt, key_press, trial_looking_time,
block_number, block_type, stimulus_displayed)
TEST_TRIAL <- c("pref_reveal", "trial")
# do we want to go w/ the data wrangling route or the jspsych route?
df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, stimulus_type, rt, key_press, trial_looking_time,
block_number, block_type, stimulus_displayed) %>%
group_by(subject, block_number) %>%
mutate(trial_number = row_number())
library(tidyverse)
library(here)
library(stringr) # for parsing r string
library(jsonlite) # for parsing r string
d_path <- here("data/merged_data/merged_data.csv")
df.raw <- read_csv(d_path)
TEST_TRIAL <- c("pref_reveal", "trial")
# do we want to go w/ the data wrangling route or the jspsych route?
df.deviant <- df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, rt,
block_number, block_type, stimulus_displayed) %>%
group_by(subject, block_number, stimulus_displayed) %>%
count() %>%
group_by(subject, block_number) %>%
mutate(
deviant = !(n == max(n)) # deviant has less occurence
) %>%
mutate(
identifier = paste0(subject, stimulus_displayed)
) %>%
ungroup() %>%
select(identifier, deviant)
df.processed <- df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, rt,
block_number, block_type, stimulus_displayed) %>%
group_by(subject, block_number) %>%
mutate(
trial_number = row_number(),
identifier = paste0(subject, stimulus_displayed)) %>%
left_join(df.deviant, by = "identifier") %>%
mutate(
trial_type = if_else(deviant, "deviant", "background"),
trial_complexity = case_when(
grepl("simple", stimulus_displayed) ~ "simple",
grepl("complex", stimulus_displayed) ~ "complex"
)
) %>%
select(subject, block_number, block_type, trial_number, trial_type, trial_complexity, rt)
df.main
View(df.deviant)
View(df.deviant)
View(df.processed)
View(df.processed)
View(df.raw)
View(df.processed)
View(df.processed)
View(df.processed)
View(df.processed)
View(df.processed)
summarized <- summarySE(df.processed, measurevar="rt", groupvars=c('trial_number','trial_type'))
library(Rmisc)
summarized <- summarySE(df.processed, measurevar="rt", groupvars=c('trial_number','trial_type'))
warnings()
View(summarized)
View(summarized)
summarized <- summarySE(df.processed, measurevar="rt", groupvars=c('trial_number'))
View(summarized)
summarized <- summarySE(df.processed, measurevar="rt", groupvars=c('trial_number'), na.rm=TRUE)
df.processed[1]
df.processed[6][1]
df.processed$rt
sapply(df.processed, class)
sapply(df.processed, mode)
TEST_TRIAL <- c("pref_reveal", "trial")
# do we want to go w/ the data wrangling route or the jspsych route?
df.deviant <- df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, rt,
block_number, block_type, stimulus_displayed) %>%
group_by(subject, block_number, stimulus_displayed) %>%
count() %>%
group_by(subject, block_number) %>%
mutate(
deviant = !(n == max(n)) # deviant has less occurence
) %>%
mutate(
identifier = paste0(subject, stimulus_displayed)
) %>%
ungroup() %>%
select(identifier, deviant)
TEST_TRIAL <- c("pref_reveal", "trial")
# do we want to go w/ the data wrangling route or the jspsych route?
df.deviant <- df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, rt,
block_number, block_type, stimulus_displayed) %>%
group_by(subject, block_number, stimulus_displayed) %>%
count() %>%
group_by(subject, block_number) %>%
mutate(
deviant = !(n == max(n)) # deviant has less occurence
) %>%
mutate(
identifier = paste0(subject, stimulus_displayed)
) %>%
ungroup() %>%
select(identifier, deviant)
TEST_TRIAL <- c("pref_reveal", "trial")
# do we want to go w/ the data wrangling route or the jspsych route?
df.deviant <- df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, rt,
block_number, block_type, stimulus_displayed) %>%
group_by(subject, block_number, stimulus_displayed) %>%
count() %>%
group_by(subject, block_number) %>%
mutate(
deviant = !(n == max(n)) # deviant has less occurence
) %>%
mutate(
identifier = paste0(subject, stimulus_displayed)
) %>%
ungroup() %>%
select(identifier, deviant)
library(Rmisc)
library(tidyverse)
library(here)
library(stringr) # for parsing r string
library(jsonlite) # for parsing r string
d_path <- here("data/merged_data/merged_data.csv")
df.raw <- read_csv(d_path)
library(Rmisc)
library(tidyverse)
library(here)
library(stringr) # for parsing r string
library(jsonlite) # for parsing r string
d_path <- here("data/merged_data/merged_data.csv")
df.raw <- read_csv(d_path)
library(tidyverse)
library(here)
library(stringr) # for parsing r string
library(jsonlite) # for parsing r string
d_path <- here("data/merged_data/merged_data.csv")
df.raw <- read_csv(d_path)
detach("package:Rmisc", unload = TRUE)
library(tidyverse)
library(here)
library(stringr) # for parsing r string
library(jsonlite) # for parsing r string
d_path <- here("data/merged_data/merged_data.csv")
df.raw <- read_csv(d_path)
library(tidyverse)
library(here)
library(stringr) # for parsing r string
library(jsonlite) # for parsing r string
d_path <- here("data/merged_data/merged_data.csv")
df.raw <- read_csv(d_path)
library(tidyverse)
library(here)
library(stringr) # for parsing r string
library(jsonlite) # for parsing r string
d_path <- here("data/merged_data/merged_data.csv")
df.raw <- read_csv(d_path)
library(tidyverse)
library(here)
library(stringr) # for parsing r string
library(jsonlite) # for parsing r string
d_path <- here("data/merged_data/merged_data.csv")
df.raw <- read_csv(d_path)
library(Rmisc)
library(tidyverse)
library(here)
library(stringr) # for parsing r string
library(jsonlite) # for parsing r string
d_path <- here("data/merged_data/merged_data.csv")
df.raw <- read_csv(d_path)
library(tidyverse)
library(Rmisc)
library(here)
library(stringr) # for parsing r string
library(jsonlite) # for parsing r string
d_path <- here("data/merged_data/merged_data.csv")
df.raw <- read_csv(d_path)
TEST_TRIAL <- c("pref_reveal", "trial")
# do we want to go w/ the data wrangling route or the jspsych route?
df.deviant <- df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, rt,
block_number, block_type, stimulus_displayed) %>%
group_by(subject, block_number, stimulus_displayed) %>%
count() %>%
group_by(subject, block_number) %>%
mutate(
deviant = !(n == max(n)) # deviant has less occurence
) %>%
mutate(
identifier = paste0(subject, stimulus_displayed)
) %>%
ungroup() %>%
select(identifier, deviant)
library(here)
library(tidyverse)
library(stringr) # for parsing r string
library(jsonlite) # for parsing r string
d_path <- here("data/merged_data/merged_data.csv")
df.raw <- read_csv(d_path)
TEST_TRIAL <- c("pref_reveal", "trial")
# do we want to go w/ the data wrangling route or the jspsych route?
df.deviant <- df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, rt,
block_number, block_type, stimulus_displayed) %>%
group_by(subject, block_number, stimulus_displayed) %>%
count() %>%
group_by(subject, block_number) %>%
mutate(
deviant = !(n == max(n)) # deviant has less occurence
) %>%
mutate(
identifier = paste0(subject, stimulus_displayed)
) %>%
ungroup() %>%
select(identifier, deviant)
df.processed <- df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, rt,
block_number, block_type, stimulus_displayed) %>%
group_by(subject, block_number) %>%
mutate(
trial_number = row_number(),
identifier = paste0(subject, stimulus_displayed)) %>%
left_join(df.deviant, by = "identifier") %>%
mutate(
trial_type = if_else(deviant, "deviant", "background"),
trial_complexity = case_when(
grepl("simple", stimulus_displayed) ~ "simple",
grepl("complex", stimulus_displayed) ~ "complex"
)
) %>%
mutate(trial_complexity = factor(trial_complexity, levels = c("simple", "complex"))) %>%
mutate(block_similarity = case_when(
grepl("_similar", block_type) ~ "similar",
grepl("_dissimilar", block_type) ~ "dissimilar"
)
) %>%
mutate(item_type = case_when(
trial_type == 'background' ~ trial_type,
trial_type == 'deviant' ~ paste(block_similarity, 'deviant')
)
) %>%
mutate(item_type = factor(
item_type,
levels = c("background",
"similar deviant",
"dissimilar deviant")
)
)  %>%
mutate(item_id =
str_match(stimulus_displayed, "spore_stims/\\s*(.*?)..\\s*.gif")[,2]
)  %>%
select(subject, block_number, block_type, trial_number, item_type, trial_type, trial_complexity, item_id, rt) %>%
transform(rt = as.numeric(rt))
write_csv(df.processed, here('data/processed_data/processed_RTdata.csv'))
# df.main
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(here)
library(ggiraphExtra)
library(plotrix)
RT_data %>%
ggplot(aes(x = rt)) +
geom_histogram() +
scale_x_log10()
RT_data <- read_csv(here('data/processed_data/processed_RTdata.csv'))
RT_data %>%
ggplot(aes(x = rt)) +
geom_histogram() +
scale_x_log10()
RT_data %>%
ggplot(aes(x = rt)) +
geom_histogram() +
scale_x_log10() +
facet_wrap(~trial_type)
RT_data %>%
ggplot(aes(x = rt)) +
geom_histogram() +
scale_x_log10() +
facet_wrap(~trial_complexity)
RT_data %>%
ggplot(aes(x = rt)) +
geom_histogram() +
scale_x_log10() +
facet_wrap(~block_type)
RT_data %>%
filter(trial_complexity == "simple") %>%
ggplot(aes(x = rt)) +
geom_histogram() +
scale_x_log10() +
facet_wrap(~item_id)
RT_data %>%
filter(trial_complexity == "complex") %>%
ggplot(aes(x = rt)) +
geom_histogram() +
scale_x_log10() +
facet_wrap(~item_id)
summarized <- RT_data %>%
group_by(trial_number, item_type, trial_complexity) %>%
summarise(meanRT=mean(rt), maxRT=max(rt), minRT=min(rt), medianRT=median(rt), Std=sd(rt), SE = std.error(rt), n = n())
ggplot(summarized, aes(x=trial_number, y=medianRT, colour=item_type)) + geom_line() + geom_errorbar(aes(ymin=medianRT-SE, ymax=medianRT+SE),
width=0.8, size = 0.8, position = position_dodge(width = 0.2), show.legend = FALSE, alpha = 0.8) +
geom_point(position = position_dodge(width = 0.2), size=2.5) + geom_line(size=1.2, position = position_dodge(width = 0.2)) + ylab("RT [msec]") +
theme_gray()  + theme(
panel.grid.minor = element_blank(),
plot.title = element_text(hjust=0.5, size=22, face="bold"),
axis.title.x = element_text(size=18, face='bold'),
axis.title.y = element_text(size=18, face='bold'),
axis.text = element_text(size=15),
legend.title = element_blank(),
legend.text = element_text(size=14, face='bold'),
strip.text = element_text(size=17, face='bold'),
legend.key.size = unit(2.5, 'lines')) +
scale_x_continuous(name="Trial Number", breaks =c(2,4,6,8)) +
facet_grid(~trial_complexity)
