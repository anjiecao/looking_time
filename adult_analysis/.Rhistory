"similar deviant",
"dissimilar deviant")
)
)  %>%
mutate(item_id =
str_match(stimulus_displayed, "spore_stims/\\s*(.*?)..\\s*.gif")[,2]
)  %>%
select(subject, block_number, block_type, trial_number, item_type, trial_type, trial_complexity, item_id, rt) %>%
transform(rt = as.numeric(rt))
write_csv(df.processed, here('data/processed_data/processed_RTdata.csv'))
# df.main
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(here)
library(ggiraphExtra)
library(plotrix)
RT_data %>%
ggplot(aes(x = rt)) +
geom_histogram() +
scale_x_log10()
RT_data <- read_csv(here('data/processed_data/processed_RTdata.csv'))
RT_data %>%
ggplot(aes(x = rt)) +
geom_histogram() +
scale_x_log10()
RT_data %>%
ggplot(aes(x = rt)) +
geom_histogram() +
scale_x_log10() +
facet_wrap(~trial_type)
RT_data %>%
ggplot(aes(x = rt)) +
geom_histogram() +
scale_x_log10() +
facet_wrap(~trial_complexity)
RT_data %>%
ggplot(aes(x = rt)) +
geom_histogram() +
scale_x_log10() +
facet_wrap(~block_type)
RT_data %>%
filter(trial_complexity == "simple") %>%
ggplot(aes(x = rt)) +
geom_histogram() +
scale_x_log10() +
facet_wrap(~item_id)
RT_data %>%
filter(trial_complexity == "complex") %>%
ggplot(aes(x = rt)) +
geom_histogram() +
scale_x_log10() +
facet_wrap(~item_id)
summarized <- RT_data %>%
group_by(trial_number, item_type, trial_complexity) %>%
summarise(meanRT=mean(rt), maxRT=max(rt), minRT=min(rt), medianRT=median(rt), Std=sd(rt), SE = std.error(rt), n = n())
ggplot(summarized, aes(x=trial_number, y=medianRT, colour=item_type)) + geom_line() + geom_errorbar(aes(ymin=medianRT-SE, ymax=medianRT+SE),
width=0.8, size = 0.8, position = position_dodge(width = 0.2), show.legend = FALSE, alpha = 0.8) +
geom_point(position = position_dodge(width = 0.2), size=2.5) + geom_line(size=1.2, position = position_dodge(width = 0.2)) + ylab("RT [msec]") +
theme_gray()  + theme(
panel.grid.minor = element_blank(),
plot.title = element_text(hjust=0.5, size=22, face="bold"),
axis.title.x = element_text(size=18, face='bold'),
axis.title.y = element_text(size=18, face='bold'),
axis.text = element_text(size=15),
legend.title = element_blank(),
legend.text = element_text(size=14, face='bold'),
strip.text = element_text(size=17, face='bold'),
legend.key.size = unit(2.5, 'lines')) +
scale_x_continuous(name="Trial Number", breaks =c(2,4,6,8)) +
facet_grid(~trial_complexity)
RAW_DATA_DIRECTORY <- here("data/raw_data/")
MIN_ROW <- 400  #subject to change
MERGED_DATA_PATH <- here("data/merged_data/merged_data.csv")
raw_files <- str_c(RAW_DATA_DIRECTORY, dir(here(RAW_DATA_DIRECTORY), "*.csv"))
# count how many rows in each file
RAW_count <- map_df(raw_files, function(file) {
d <- read_csv(file) %>%
count() %>%
mutate(
file_name = file
)
})
RAW_DATA <- map_df((RAW_count %>% filter(n > MIN_ROW))$file_name,
function(file){
d <- read_csv(file)
})
library(here)
library(tidyverse)
# currently not deidentifiying!!
RAW_DATA_DIRECTORY <- here("data/raw_data/")
MIN_ROW <- 400  #subject to change
MERGED_DATA_PATH <- here("data/merged_data/merged_data.csv")
raw_files <- str_c(RAW_DATA_DIRECTORY, dir(here(RAW_DATA_DIRECTORY), "*.csv"))
# count how many rows in each file
RAW_count <- map_df(raw_files, function(file) {
d <- read_csv(file) %>%
count() %>%
mutate(
file_name = file
)
})
RAW_DATA <- map_df((RAW_count %>% filter(n > MIN_ROW))$file_name,
function(file){
d <- read_csv(file)
})
View(RAW_DATA)
source('~/Desktop/projects/looking_time/adult_analysis/00_merged_and_deidentified.R', echo=TRUE)
library(here)
library(tidyverse)
library(stringr) # for parsing r string
library(jsonlite) # for parsing r string
d_path <- here("data/merged_data/merged_data.csv")
df.raw <- read_csv(d_path)
TEST_TRIAL <- c("pref_reveal", "trial")
# do we want to go w/ the data wrangling route or the jspsych route?
df.deviant <- df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, rt,
block_number, block_type, stimulus_displayed) %>%
group_by(subject, block_number, stimulus_displayed) %>%
count() %>%
group_by(subject, block_number) %>%
mutate(
deviant = !(n == max(n)) # deviant has less occurence
) %>%
mutate(
identifier = paste0(subject, stimulus_displayed)
) %>%
ungroup() %>%
select(identifier, deviant)
df.processed <- df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, rt,
block_number, block_type, stimulus_displayed) %>%
group_by(subject, block_number) %>%
mutate(
trial_number = row_number(),
identifier = paste0(subject, stimulus_displayed)) %>%
left_join(df.deviant, by = "identifier") %>%
mutate(
trial_type = if_else(deviant, "deviant", "background"),
trial_complexity = case_when(
grepl("simple", stimulus_displayed) ~ "simple",
grepl("complex", stimulus_displayed) ~ "complex"
)
) %>%
mutate(trial_complexity = factor(trial_complexity, levels = c("simple", "complex"))) %>%
mutate(block_similarity = case_when(
grepl("_similar", block_type) ~ "similar",
grepl("_dissimilar", block_type) ~ "dissimilar"
)
) %>%
mutate(item_type = case_when(
trial_type == 'background' ~ trial_type,
trial_type == 'deviant' ~ paste(block_similarity, 'deviant')
)
) %>%
mutate(item_type = factor(
item_type,
levels = c("background",
"similar deviant",
"dissimilar deviant")
)
)  %>%
mutate(item_id =
str_match(stimulus_displayed, "spore_stims/\\s*(.*?)..\\s*.gif")[,2]
)  %>%
select(subject, block_number, block_type, trial_number, item_type, trial_type, trial_complexity, item_id, rt) %>%
transform(rt = as.numeric(rt))
write_csv(df.processed, here('data/processed_data/processed_RTdata.csv'))
# df.main
# complexity doesn't have trial type
df.similarity <- df.raw %>%
filter(trial_type == "survey-likert") %>%
mutate(
question_type = case_when(
stimulus_type == "similarity_question" ~ "similarity",
TRUE ~ "complexity"
)
) %>%
filter(question_type =="similarity") %>%
select(subject, question_type, rt, responses, stimulus_left, stimulus_right) %>%
# a dumb way to extrat the rating
separate(responses, into = c("question", "raw_answer"), sep = ":") %>%
mutate(
rating = as.numeric(str_extract(raw_answer, "[[:digit:]]+"))) %>%
select(subject, question_type, stimulus_left, stimulus_right, rating)
write_csv(df.similarity, here('data/processed_data/processed_similaritydata.csv'))
df.complexity <- df.raw %>%
filter(trial_type == "survey-likert") %>%
mutate(
question_type = case_when(
stimulus_type == "similarity_question" ~ "similarity",
TRUE ~ "complexity"
)
) %>%
filter(question_type =="complexity") %>%
select(subject, question_type, rt, responses, stimulus) %>%
# a dumb way to extrat the rating
separate(responses, into = c("question", "raw_answer"), sep = ":") %>%
mutate(
rating = as.numeric(str_extract(raw_answer, "[[:digit:]]+"))) %>%
select(subject, question_type, stimulus, rating)
write_csv(df.complexity, here('data/processed_data/processed_complexitydata.csv'))
df.demog <- df.raw  %>%
filter(grepl("demog", trial_type)) %>%
select(subject, trial_type, responses) %>%
toJSON() %>%
fromJSON() %>%
mutate(
demog_question = map(responses, ~ fromJSON(.) %>% as.data.frame())) %>%
unnest(demog_question)  %>%
group_by(subject) %>%
mutate_at(vars(-group_cols()), function(x) {x[!is.na(x)][1]}) %>%
distinct() %>%
select(-responses, -trial_type)
write_csv(df.demog, here('data/processed_data/processed_demogdata.csv'))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(here)
library(ggiraphExtra)
library(plotrix)
RT_data <- read_csv(here('data/processed_data/processed_RTdata.csv'))
RT_data %>%
ggplot(aes(x = rt)) +
geom_histogram() +
scale_x_log10()
RT_data %>%
distinct(subject) %>%
count()
RT_data %>% filter(trial_number == 1, block_type == "dissimilar deviant")
RT_data %>% filter(block_type == "dissimilar deviant")
View(RT_data)
RT_data %>% filter(block_type == "item type")
RT_data %>% filter(item_type == "dissimilar deviant")
View(RT_data %>% filter(item_type == "dissimilar deviant"))
View(RT_data %>% filter(item_type == "dissimilar deviant") %>% filter(trial_number == 1))
raw <- read_csv(here("merged_data/merged_data.csv"))
raw <- read_csv(here("data/merged_data/merged_data.csv"))
View(raw %>% filter(item_type == "dissimilar deviant") %>% filter(trial_number == 1))
view(raw)
View(raw %>% filter(grepl("dissimilar", block_type)))
View(RT_data %>% filter(item_type == "dissimilar deviant") %>% filter(trial_number == 2))
df.raw %>%
filter(stimulus_type == "trial")
View(RT_data %>% filter(item_type == "dissimilar deviant") %>% filter(trial_number == 2))
RT_data %>% filter(subject !%in% c(“SS1612925903745”))
RT_data %>% filter(!(subject %in% c(“SS1612925903745"))
RT_data %>% filter(!(subject %in% c("SS1612925903745"))
RT_data %>% filter(!(subject %in% c("SS1612925903745")))
RT_data %>% filter(!(subject %in% c("SS1612925903745", "SS1612929941256")))
RT_data %>% filter(!(subject %in% c("SS1612925903745", "SS1612929941256", "SS1612925903745")))
RT_data %>% filter(!(subject %in% c("SS1612925903745", "SS1612929941256", "SS1612927819925")))
library(here)
library(tidyverse)
library(stringr) # for parsing r string
library(jsonlite) # for parsing r string
d_path <- here("data/merged_data/merged_data.csv")
# d_path <- here("data/raw_data/testSS1612925903745.csv")
df.raw <- read_csv(d_path)
source('~/Desktop/projects/looking_time/adult_analysis/00_merged_and_deidentified.R', echo=TRUE)
raw_files <- str_c(RAW_DATA_DIRECTORY, dir(here(RAW_DATA_DIRECTORY), "*.csv"))
library(here)
library(tidyverse)
# currently not deidentifiying!!
RAW_DATA_DIRECTORY <- here("data/raw_data/")
MIN_ROW <- 400  #subject to change
MERGED_DATA_PATH <- here("data/merged_data/merged_data.csv")
raw_files <- str_c(RAW_DATA_DIRECTORY, dir(here(RAW_DATA_DIRECTORY), "*.csv"))
# count how many rows in each file
RAW_count <- map_df(raw_files, function(file) {
d <- read_csv(file) %>%
count() %>%
mutate(
file_name = file
)
})
RAW_DATA <- map_df((RAW_count %>% filter(n > MIN_ROW))$file_name,
function(file){
d <- read_csv(file)
})
write_csv(RAW_DATA, MERGED_DATA_PATH)
library(here)
library(tidyverse)
library(stringr) # for parsing r string
library(jsonlite) # for parsing r string
d_path <- here("data/merged_data/merged_data.csv")
# d_path <- here("data/raw_data/testSS1612925903745.csv")
df.raw <- read_csv(d_path)
View(df.raw)
source('~/Desktop/projects/looking_time/adult_analysis/00_merged_and_deidentified.R', echo=TRUE)
library(here)
library(tidyverse)
library(stringr) # for parsing r string
library(jsonlite) # for parsing r string
d_path <- here("data/merged_data/merged_data.csv")
# d_path <- here("data/raw_data/testSS1612925903745.csv")
df.raw <- read_csv(d_path)
View(df.raw)
library(here)
library(tidyverse)
library(stringr) # for parsing r string
library(jsonlite) # for parsing r string
d_path <- here("data/merged_data/merged_data.csv")
# d_path <- here("data/raw_data/testSS1612925903745.csv")
df.raw <- read_csv(d_path)
TEST_TRIAL <- c("pref_reveal", "trial")
# do we want to go w/ the data wrangling route or the jspsych route?
df.deviant <- df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, rt,
block_number, block_type, stimulus_displayed) %>%
group_by(subject, block_number, stimulus_displayed) %>%
count() %>%
group_by(subject, block_number) %>%
mutate(
deviant = !(n == max(n)) # deviant has less occurence
) %>%
mutate(
identifier = paste0(subject, stimulus_displayed)
) %>%
ungroup() %>%
select(identifier, deviant)
View(df.raw)
library(here)
library(tidyverse)
library(stringr) # for parsing r string
library(jsonlite) # for parsing r string
d_path <- here("data/merged_data/merged_data.csv")
# d_path <- here("data/raw_data/testSS1612925903745.csv")
df.raw <- read_csv(d_path)
source('~/Desktop/projects/looking_time/adult_analysis/00_merged_and_deidentified.R', echo=TRUE)
library(here)
library(tidyverse)
library(stringr) # for parsing r string
library(jsonlite) # for parsing r string
d_path <- here("data/merged_data/merged_data.csv")
# d_path <- here("data/raw_data/testSS1612925903745.csv")
df.raw <- read_csv(d_path)
TEST_TRIAL <- c("pref_reveal", "trial")
# do we want to go w/ the data wrangling route or the jspsych route?
df.processed <- df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, rt,
block_number, block_type, stimulus_displayed) %>%
group_by(subject, block_number) %>%
mutate(
trial_number = row_number(),
identifier = paste0(subject, stimulus_displayed)) %>%
left_join(df.deviant, by = "identifier") %>%
mutate(
trial_type = if_else(deviant, "deviant", "background"),
trial_complexity = case_when(
grepl("simple", stimulus_displayed) ~ "simple",
grepl("complex", stimulus_displayed) ~ "complex"
)
) %>%
mutate(trial_complexity = factor(trial_complexity, levels = c("simple", "complex"))) %>%
mutate(block_similarity = case_when(
grepl("_similar", block_type) ~ "similar",
grepl("_dissimilar", block_type) ~ "dissimilar"
)
) %>%
mutate(item_type = case_when(
trial_type == 'background' ~ trial_type,
trial_type == 'deviant' ~ paste(block_similarity, 'deviant')
)
) %>%
mutate(item_type = factor(
item_type,
levels = c("background",
"similar deviant",
"dissimilar deviant")
)
)  %>%
mutate(item_id =
str_match(stimulus_displayed, "spore_stims/\\s*(.*?)..\\s*.gif")[,2]
)  %>%
select(subject, block_number, block_type, trial_number, item_type, trial_type, trial_complexity, item_id, rt) %>%
transform(rt = as.numeric(rt))
View(df.raw)
TEST_TRIAL <- c("pref_reveal", "trial")
# do we want to go w/ the data wrangling route or the jspsych route?
df.processed <- df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, rt,
block_number, block_type, stimulus_displayed) %>%
group_by(subject, block_number) %>%
mutate(
trial_number = row_number()) %>%
left_join(df.deviant, by = "identifier") %>%
mutate(
trial_type = case_when(
stimulus_displayed == block_deviant ~ "deviant",
TRUE ~ "background"
),
trial_complexity = case_when(
grepl("simple", stimulus_displayed) ~ "simple",
grepl("complex", stimulus_displayed) ~ "complex"
)
) %>%
mutate(trial_complexity = factor(trial_complexity, levels = c("simple", "complex"))) %>%
mutate(block_similarity = case_when(
grepl("_similar", block_type) ~ "similar",
grepl("_dissimilar", block_type) ~ "dissimilar"
)
) %>%
mutate(item_type = case_when(
trial_type == 'background' ~ trial_type,
trial_type == 'deviant' ~ paste(block_similarity, 'deviant')
)
) %>%
mutate(item_type = factor(
item_type,
levels = c("background",
"similar deviant",
"dissimilar deviant")
)
)  %>%
mutate(item_id =
str_match(stimulus_displayed, "spore_stims/\\s*(.*?)..\\s*.gif")[,2]
)  %>%
select(subject, block_number, block_type, trial_number, item_type, trial_type, trial_complexity, item_id, rt) %>%
transform(rt = as.numeric(rt))
TEST_TRIAL <- c("pref_reveal", "trial")
# do we want to go w/ the data wrangling route or the jspsych route?
df.processed <- df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, rt,
block_number, block_type, stimulus_displayed) %>%
group_by(subject, block_number) %>%
mutate(
trial_number = row_number()) %>%
mutate(
trial_type = case_when(
stimulus_displayed == block_deviant ~ "deviant",
TRUE ~ "background"
),
trial_complexity = case_when(
grepl("simple", stimulus_displayed) ~ "simple",
grepl("complex", stimulus_displayed) ~ "complex"
)
) %>%
mutate(trial_complexity = factor(trial_complexity, levels = c("simple", "complex"))) %>%
mutate(block_similarity = case_when(
grepl("_similar", block_type) ~ "similar",
grepl("_dissimilar", block_type) ~ "dissimilar"
)
) %>%
mutate(item_type = case_when(
trial_type == 'background' ~ trial_type,
trial_type == 'deviant' ~ paste(block_similarity, 'deviant')
)
) %>%
mutate(item_type = factor(
item_type,
levels = c("background",
"similar deviant",
"dissimilar deviant")
)
)  %>%
mutate(item_id =
str_match(stimulus_displayed, "spore_stims/\\s*(.*?)..\\s*.gif")[,2]
)  %>%
select(subject, block_number, block_type, trial_number, item_type, trial_type, trial_complexity, item_id, rt) %>%
transform(rt = as.numeric(rt))
TEST_TRIAL <- c("pref_reveal", "trial")
# do we want to go w/ the data wrangling route or the jspsych route?
df.processed <- df.raw %>%
filter(stimulus_type == "trial") %>%
select(subject, rt,
block_number, block_type, stimulus_displayed,
block_deviant, block_background) %>%
group_by(subject, block_number) %>%
mutate(
trial_number = row_number()) %>%
mutate(
trial_type = case_when(
stimulus_displayed == block_deviant ~ "deviant",
TRUE ~ "background"
),
trial_complexity = case_when(
grepl("simple", stimulus_displayed) ~ "simple",
grepl("complex", stimulus_displayed) ~ "complex"
)
) %>%
mutate(trial_complexity = factor(trial_complexity, levels = c("simple", "complex"))) %>%
mutate(block_similarity = case_when(
grepl("_similar", block_type) ~ "similar",
grepl("_dissimilar", block_type) ~ "dissimilar"
)
) %>%
mutate(item_type = case_when(
trial_type == 'background' ~ trial_type,
trial_type == 'deviant' ~ paste(block_similarity, 'deviant')
)
) %>%
mutate(item_type = factor(
item_type,
levels = c("background",
"similar deviant",
"dissimilar deviant")
)
)  %>%
mutate(item_id =
str_match(stimulus_displayed, "spore_stims/\\s*(.*?)..\\s*.gif")[,2]
)  %>%
select(subject, block_number, block_type, trial_number, item_type, trial_type, trial_complexity, item_id, rt) %>%
transform(rt = as.numeric(rt))
write_csv(df.processed, here('data/processed_data/processed_RTdata.csv'))
# df.main
View(df.processed)
